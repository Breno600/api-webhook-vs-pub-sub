Exec using JSCH
Connecting to 10.218.238.144 ....
Connection to 10.218.238.144 established
Executing command ...
export GIT_TAG=DEV000000007
Clonando repo em /tmp/tmp.XH1y4C5mAS...
Cloning into '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-sitef'...
remote: Enumerating objects: 584, done.
remote: Counting objects:   0% (1/534)
remote: Counting objects:   1% (6/534)
remote: Counting objects:   2% (11/534)
remote: Counting objects:   3% (17/534)
remote: Counting objects:   4% (22/534)
remote: Counting objects:   5% (27/534)
remote: Counting objects:   6% (33/534)
remote: Counting objects:   7% (38/534)
remote: Counting objects:   8% (43/534)
remote: Counting objects:   9% (49/534)
remote: Counting objects:  10% (54/534)
remote: Counting objects:  11% (59/534)
remote: Counting objects:  12% (65/534)
remote: Counting objects:  13% (70/534)
remote: Counting objects:  14% (75/534)
remote: Counting objects:  15% (81/534)
remote: Counting objects:  16% (86/534)
remote: Counting objects:  17% (91/534)
remote: Counting objects:  18% (97/534)
remote: Counting objects:  19% (102/534)
remote: Counting objects:  20% (107/534)
remote: Counting objects:  21% (113/534)
remote: Counting objects:  22% (118/534)
remote: Counting objects:  23% (123/534)
remote: Counting objects:  24% (129/534)
remote: Counting objects:  25% (134/534)
remote: Counting objects:  26% (139/534)
remote: Counting objects:  27% (145/534)
remote: Counting objects:  28% (150/534)
remote: Counting objects:  29% (155/534)
remote: Counting objects:  30% (161/534)
remote: Counting objects:  31% (166/534)
remote: Counting objects:  32% (171/534)
remote: Counting objects:  33% (177/534)
remote: Counting objects:  34% (182/534)
remote: Counting objects:  35% (187/534)
remote: Counting objects:  36% (193/534)
remote: Counting objects:  37% (198/534)
remote: Counting objects:  38% (203/534)
remote: Counting objects:  39% (209/534)
remote: Counting objects:  40% (214/534)
remote: Counting objects:  41% (219/534)
remote: Counting objects:  42% (225/534)
remote: Counting objects:  43% (230/534)
remote: Counting objects:  44% (235/534)
remote: Counting objects:  45% (241/534)
remote: Counting objects:  46% (246/534)
remote: Counting objects:  47% (251/534)
remote: Counting objects:  48% (257/534)
remote: Counting objects:  49% (262/534)
remote: Counting objects:  50% (267/534)
remote: Counting objects:  51% (273/534)
remote: Counting objects:  52% (278/534)
remote: Counting objects:  53% (284/534)
remote: Counting objects:  54% (289/534)
remote: Counting objects:  55% (294/534)
remote: Counting objects:  56% (300/534)
remote: Counting objects:  57% (305/534)
remote: Counting objects:  58% (310/534)
remote: Counting objects:  59% (316/534)
remote: Counting objects:  60% (321/534)
remote: Counting objects:  61% (326/534)
remote: Counting objects:  62% (332/534)
remote: Counting objects:  63% (337/534)
remote: Counting objects:  64% (342/534)
remote: Counting objects:  65% (348/534)
remote: Counting objects:  66% (353/534)
remote: Counting objects:  67% (358/534)
remote: Counting objects:  68% (364/534)
remote: Counting objects:  69% (369/534)
remote: Counting objects:  70% (374/534)
remote: Counting objects:  71% (380/534)
remote: Counting objects:  72% (385/534)
remote: Counting objects:  73% (390/534)
remote: Counting objects:  74% (396/534)
remote: Counting objects:  75% (401/534)
remote: Counting objects:  76% (406/534)
remote: Counting objects:  77% (412/534)
remote: Counting objects:  78% (417/534)
remote: Counting objects:  79% (422/534)
remote: Counting objects:  80% (428/534)
remote: Counting objects:  81% (433/534)
remote: Counting objects:  82% (438/534)
remote: Counting objects:  83% (444/534)
remote: Counting objects:  84% (449/534)
remote: Counting objects:  85% (454/534)
remote: Counting objects:  86% (460/534)
remote: Counting objects:  87% (465/534)
remote: Counting objects:  88% (470/534)
remote: Counting objects:  89% (476/534)
remote: Counting objects:  90% (481/534)
remote: Counting objects:  91% (486/534)
remote: Counting objects:  92% (492/534)
remote: Counting objects:  93% (497/534)
remote: Counting objects:  94% (502/534)
remote: Counting objects:  95% (508/534)
remote: Counting objects:  96% (513/534)
remote: Counting objects:  97% (518/534)
remote: Counting objects:  98% (524/534)
remote: Counting objects:  99% (529/534)
remote: Counting objects: 100% (534/534)
remote: Counting objects: 100% (534/534), done.
remote: Compressing objects:   0% (1/521)
remote: Compressing objects:   1% (6/521)
remote: Compressing objects:   2% (11/521)
remote: Compressing objects:   3% (16/521)
remote: Compressing objects:   4% (21/521)
remote: Compressing objects:   5% (27/521)
remote: Compressing objects:   6% (32/521)
remote: Compressing objects:   7% (37/521)
remote: Compressing objects:   8% (42/521)
remote: Compressing objects:   9% (47/521)
remote: Compressing objects:  10% (53/521)
remote: Compressing objects:  11% (58/521)
remote: Compressing objects:  12% (63/521)
remote: Compressing objects:  13% (68/521)
remote: Compressing objects:  14% (73/521)
remote: Compressing objects:  15% (79/521)
remote: Compressing objects:  16% (84/521)
remote: Compressing objects:  17% (89/521)
remote: Compressing objects:  18% (94/521)
remote: Compressing objects:  19% (99/521)
remote: Compressing objects:  20% (105/521)
remote: Compressing objects:  21% (110/521)
remote: Compressing objects:  22% (115/521)
remote: Compressing objects:  23% (120/521)
remote: Compressing objects:  24% (126/521)
remote: Compressing objects:  25% (131/521)
remote: Compressing objects:  26% (136/521)
remote: Compressing objects:  27% (141/521)
remote: Compressing objects:  28% (146/521)
remote: Compressing objects:  29% (152/521)
remote: Compressing objects:  30% (157/521)
remote: Compressing objects:  31% (162/521)
remote: Compressing objects:  32% (167/521)
remote: Compressing objects:  33% (172/521)
remote: Compressing objects:  34% (178/521)
remote: Compressing objects:  35% (183/521)
remote: Compressing objects:  36% (188/521)
remote: Compressing objects:  37% (193/521)
remote: Compressing objects:  38% (198/521)
remote: Compressing objects:  39% (204/521)
remote: Compressing objects:  40% (209/521)
remote: Compressing objects:  41% (214/521)
remote: Compressing objects:  42% (219/521)
remote: Compressing objects:  43% (225/521)
remote: Compressing objects:  44% (230/521)
remote: Compressing objects:  45% (235/521)
remote: Compressing objects:  46% (240/521)
remote: Compressing objects:  47% (245/521)
remote: Compressing objects:  48% (251/521)
remote: Compressing objects:  49% (256/521)
remote: Compressing objects:  50% (261/521)
remote: Compressing objects:  51% (266/521)
remote: Compressing objects:  52% (271/521)
remote: Compressing objects:  53% (277/521)
remote: Compressing objects:  54% (282/521)
remote: Compressing objects:  55% (287/521)
remote: Compressing objects:  56% (292/521)
remote: Compressing objects:  57% (297/521)
remote: Compressing objects:  58% (303/521)
remote: Compressing objects:  59% (308/521)
remote: Compressing objects:  60% (313/521)
remote: Compressing objects:  61% (318/521)
remote: Compressing objects:  62% (324/521)
remote: Compressing objects:  63% (329/521)
remote: Compressing objects:  64% (334/521)
remote: Compressing objects:  65% (339/521)
remote: Compressing objects:  66% (344/521)
remote: Compressing objects:  67% (350/521)
remote: Compressing objects:  68% (355/521)
remote: Compressing objects:  69% (360/521)
remote: Compressing objects:  70% (365/521)
remote: Compressing objects:  71% (370/521)
remote: Compressing objects:  72% (376/521)
remote: Compressing objects:  73% (381/521)
remote: Compressing objects:  74% (386/521)
remote: Compressing objects:  75% (391/521)
remote: Compressing objects:  76% (396/521)
remote: Compressing objects:  77% (402/521)
remote: Compressing objects:  78% (407/521)
remote: Compressing objects:  79% (412/521)
remote: Compressing objects:  80% (417/521)
remote: Compressing objects:  81% (423/521)
remote: Compressing objects:  82% (428/521)
remote: Compressing objects:  83% (433/521)
remote: Compressing objects:  84% (438/521)
remote: Compressing objects:  85% (443/521)
remote: Compressing objects:  86% (449/521)
remote: Compressing objects:  87% (454/521)
remote: Compressing objects:  88% (459/521)
remote: Compressing objects:  89% (464/521)
remote: Compressing objects:  90% (469/521)
remote: Compressing objects:  91% (475/521)
remote: Compressing objects:  92% (480/521)
remote: Compressing objects:  93% (485/521)
remote: Compressing objects:  94% (490/521)
remote: Compressing objects:  95% (495/521)
remote: Compressing objects:  96% (501/521)
remote: Compressing objects:  97% (506/521)
remote: Compressing objects:  98% (511/521)
remote: Compressing objects:  99% (516/521)
remote: Compressing objects: 100% (521/521)
remote: Compressing objects: 100% (521/521), done.
remote: Total 584 (delta 324), reused 0 (delta 0), pack-reused 50
Receiving objects:   0% (1/584)
Receiving objects:   1% (6/584)
Receiving objects:   2% (12/584)
Receiving objects:   3% (18/584)
Receiving objects:   4% (24/584)
Receiving objects:   5% (30/584)
Receiving objects:   6% (36/584)
Receiving objects:   7% (41/584)
Receiving objects:   8% (47/584)
Receiving objects:   9% (53/584)
Receiving objects:  10% (59/584)
Receiving objects:  11% (65/584)
Receiving objects:  12% (71/584)
Receiving objects:  13% (76/584)
Receiving objects:  14% (82/584)
Receiving objects:  15% (88/584)
Receiving objects:  16% (94/584)
Receiving objects:  17% (100/584)
Receiving objects:  18% (106/584)
Receiving objects:  19% (111/584)
Receiving objects:  20% (117/584)
Receiving objects:  21% (123/584)
Receiving objects:  22% (129/584)
Receiving objects:  23% (135/584)
Receiving objects:  24% (141/584)
Receiving objects:  25% (146/584)
Receiving objects:  26% (152/584)
Receiving objects:  27% (158/584)
Receiving objects:  28% (164/584)
Receiving objects:  29% (170/584)
Receiving objects:  30% (176/584)
Receiving objects:  31% (182/584)
Receiving objects:  32% (187/584)
Receiving objects:  33% (193/584)
Receiving objects:  34% (199/584)
Receiving objects:  35% (205/584)
Receiving objects:  36% (211/584)
Receiving objects:  37% (217/584)
Receiving objects:  38% (222/584)
Receiving objects:  39% (228/584)
Receiving objects:  40% (234/584)
Receiving objects:  41% (240/584)
Receiving objects:  42% (246/584)
Receiving objects:  43% (252/584)
Receiving objects:  44% (257/584)
Receiving objects:  45% (263/584)
Receiving objects:  46% (269/584)
Receiving objects:  47% (275/584)
Receiving objects:  48% (281/584)
Receiving objects:  49% (287/584)
Receiving objects:  50% (292/584)
Receiving objects:  51% (298/584)
Receiving objects:  52% (304/584)
Receiving objects:  53% (310/584)
Receiving objects:  54% (316/584)
Receiving objects:  55% (322/584)
Receiving objects:  56% (328/584)
Receiving objects:  57% (333/584)
Receiving objects:  58% (339/584)
Receiving objects:  59% (345/584)
Receiving objects:  60% (351/584)
Receiving objects:  61% (357/584)
Receiving objects:  62% (363/584)
Receiving objects:  63% (368/584)
Receiving objects:  64% (374/584)
Receiving objects:  65% (380/584)
Receiving objects:  66% (386/584)
Receiving objects:  67% (392/584)
Receiving objects:  68% (398/584)
Receiving objects:  69% (403/584)
Receiving objects:  70% (409/584)
Receiving objects:  71% (415/584)
Receiving objects:  72% (421/584)
Receiving objects:  73% (427/584)
Receiving objects:  74% (433/584)
Receiving objects:  75% (438/584)
Receiving objects:  76% (444/584)
Receiving objects:  77% (450/584)
Receiving objects:  78% (456/584)
Receiving objects:  79% (462/584)
Receiving objects:  80% (468/584)
Receiving objects:  81% (474/584)
Receiving objects:  82% (479/584)
Receiving objects:  83% (485/584)
Receiving objects:  84% (491/584)
Receiving objects:  85% (497/584)
Receiving objects:  86% (503/584)
Receiving objects:  87% (509/584)
Receiving objects:  88% (514/584)
Receiving objects:  89% (520/584)
Receiving objects:  90% (526/584)
Receiving objects:  91% (532/584)
Receiving objects:  92% (538/584)
Receiving objects:  93% (544/584)
Receiving objects:  94% (549/584)
Receiving objects:  95% (555/584)
Receiving objects:  96% (561/584)
Receiving objects:  97% (567/584)
Receiving objects:  98% (573/584)
Receiving objects:  99% (579/584)
Receiving objects: 100% (584/584)
Receiving objects: 100% (584/584), 94.57 KiB | 13.51 MiB/s, done.
Resolving deltas:   0% (0/343)
Resolving deltas:   1% (4/343)
Resolving deltas:   2% (7/343)
Resolving deltas:   3% (11/343)
Resolving deltas:   4% (14/343)
Resolving deltas:   5% (18/343)
Resolving deltas:   6% (21/343)
Resolving deltas:   7% (25/343)
Resolving deltas:   8% (28/343)
Resolving deltas:   9% (31/343)
Resolving deltas:  10% (35/343)
Resolving deltas:  11% (38/343)
Resolving deltas:  12% (42/343)
Resolving deltas:  13% (45/343)
Resolving deltas:  14% (49/343)
Resolving deltas:  15% (52/343)
Resolving deltas:  16% (55/343)
Resolving deltas:  17% (59/343)
Resolving deltas:  18% (62/343)
Resolving deltas:  19% (66/343)
Resolving deltas:  20% (69/343)
Resolving deltas:  21% (73/343)
Resolving deltas:  22% (76/343)
Resolving deltas:  23% (79/343)
Resolving deltas:  24% (83/343)
Resolving deltas:  25% (86/343)
Resolving deltas:  26% (90/343)
Resolving deltas:  27% (93/343)
Resolving deltas:  28% (97/343)
Resolving deltas:  29% (100/343)
Resolving deltas:  30% (103/343)
Resolving deltas:  31% (107/343)
Resolving deltas:  32% (110/343)
Resolving deltas:  33% (114/343)
Resolving deltas:  34% (117/343)
Resolving deltas:  35% (121/343)
Resolving deltas:  36% (124/343)
Resolving deltas:  37% (127/343)
Resolving deltas:  38% (131/343)
Resolving deltas:  39% (134/343)
Resolving deltas:  40% (138/343)
Resolving deltas:  41% (141/343)
Resolving deltas:  42% (145/343)
Resolving deltas:  43% (148/343)
Resolving deltas:  44% (151/343)
Resolving deltas:  45% (155/343)
Resolving deltas:  46% (158/343)
Resolving deltas:  47% (162/343)
Resolving deltas:  48% (165/343)
Resolving deltas:  49% (169/343)
Resolving deltas:  50% (172/343)
Resolving deltas:  51% (175/343)
Resolving deltas:  52% (179/343)
Resolving deltas:  53% (182/343)
Resolving deltas:  54% (186/343)
Resolving deltas:  55% (189/343)
Resolving deltas:  56% (193/343)
Resolving deltas:  57% (196/343)
Resolving deltas:  58% (199/343)
Resolving deltas:  59% (203/343)
Resolving deltas:  60% (206/343)
Resolving deltas:  61% (210/343)
Resolving deltas:  62% (213/343)
Resolving deltas:  63% (217/343)
Resolving deltas:  64% (220/343)
Resolving deltas:  65% (223/343)
Resolving deltas:  66% (227/343)
Resolving deltas:  67% (230/343)
Resolving deltas:  68% (234/343)
Resolving deltas:  69% (237/343)
Resolving deltas:  70% (241/343)
Resolving deltas:  71% (244/343)
Resolving deltas:  72% (247/343)
Resolving deltas:  73% (251/343)
Resolving deltas:  74% (254/343)
Resolving deltas:  75% (258/343)
Resolving deltas:  76% (261/343)
Resolving deltas:  77% (265/343)
Resolving deltas:  78% (268/343)
Resolving deltas:  79% (271/343)
Resolving deltas:  80% (275/343)
Resolving deltas:  81% (278/343)
Resolving deltas:  82% (282/343)
Resolving deltas:  83% (285/343)
Resolving deltas:  84% (289/343)
Resolving deltas:  85% (292/343)
Resolving deltas:  86% (295/343)
Resolving deltas:  87% (299/343)
Resolving deltas:  88% (302/343)
Resolving deltas:  89% (306/343)
Resolving deltas:  90% (309/343)
Resolving deltas:  91% (313/343)
Resolving deltas:  92% (316/343)
Resolving deltas:  93% (319/343)
Resolving deltas:  94% (323/343)
Resolving deltas:  95% (326/343)
Resolving deltas:  96% (330/343)
Resolving deltas:  97% (333/343)
Resolving deltas:  98% (337/343)
Resolving deltas:  99% (340/343)
Resolving deltas: 100% (343/343)
Resolving deltas: 100% (343/343), done.
== PIPELINE PREDEPLOY ==
TAG   : DEV000000007
EXEC  : execution/machine_list_dev.yml
BRANCH: develop
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/localhost as an inventory source
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_from_status.yml with auto plugin: no root 'plugin' key
found, '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_from_status.yml' is not a valid YAML inventory plugin
config file
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_from_status.yml with yaml plugin: YAML inventory has
invalid structure, it should be a dictionary, got: &lt;class
'ansible.parsing.yaml.objects.AnsibleSequence'>
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_from_status.yml with ini plugin:
/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_from_status.yml:8: Expected key=value host variable
assignment, got: name:
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_from_status.yml as an inventory source
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_per_machine.yml with auto plugin: no root 'plugin' key
found, '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_per_machine.yml' is not a valid YAML inventory plugin
config file
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_per_machine.yml with yaml plugin: YAML inventory has
invalid structure, it should be a dictionary, got: &lt;class
'ansible.parsing.yaml.objects.AnsibleSequence'>
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_per_machine.yml with ini plugin:
/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_per_machine.yml:3: Expected key=value host variable
assignment, got: name:
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/deploy_per_machine.yml as an inventory source
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_from_execution.yml with auto plugin: no root 'plugin'
key found, '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_from_execution.yml' is not a valid YAML inventory
plugin config file
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_from_execution.yml with yaml plugin: YAML inventory has
invalid structure, it should be a dictionary, got: &lt;class
'ansible.parsing.yaml.objects.AnsibleSequence'>
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_from_execution.yml with ini plugin:
/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_from_execution.yml:15: Expected key=value host variable
assignment, got: name:
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_from_execution.yml as an inventory source
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_per_machine.yml with auto plugin: no root 'plugin' key
found, '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_per_machine.yml' is not a valid YAML inventory plugin
config file
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_per_machine.yml with yaml plugin: YAML inventory has
invalid structure, it should be a dictionary, got: &lt;class
'ansible.parsing.yaml.objects.AnsibleSequence'>
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_per_machine.yml with ini plugin:
/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_per_machine.yml:7: Expected key=value host variable
assignment, got: name:
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/predeploy_per_machine.yml as an inventory source
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_from_status.yml with auto plugin: no root 'plugin' key
found, '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_from_status.yml' is not a valid YAML inventory plugin
config file
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_from_status.yml with yaml plugin: YAML inventory has
invalid structure, it should be a dictionary, got: &lt;class
'ansible.parsing.yaml.objects.AnsibleSequence'>
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_from_status.yml with ini plugin:
/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_from_status.yml:3: Expected key=value host variable
assignment, got: name:
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_from_status.yml as an inventory source
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_per_machine.yml with auto plugin: no root 'plugin' key
found, '/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_per_machine.yml' is not a valid YAML inventory plugin
config file
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_per_machine.yml with yaml plugin: YAML inventory has
invalid structure, it should be a dictionary, got: &lt;class
'ansible.parsing.yaml.objects.AnsibleSequence'>
[WARNING]:  * Failed to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_per_machine.yml with ini plugin:
/tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_per_machine.yml:3: Expected key=value host variable
assignment, got: name:
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible/rollback_per_machine.yml as an inventory source
[WARNING]: Unable to parse /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-
sitef/ansible as an inventory source
[WARNING]: No inventory was parsed, only implicit localhost is available
[WARNING]: provided hosts list is empty, only localhost is available. Note that
the implicit localhost does not match 'all'
PLAY [Predeploy a partir do arquivo de execução] *******************************
TASK [Gathering Facts] *********************************************************
ok: [localhost]
TASK [Resolver filestore vars sem recursão] ************************************
ok: [localhost]
TASK [Resolver filestore_env] **************************************************
ok: [localhost]
TASK [Resolver filestore_base_dir] *********************************************
ok: [localhost]
TASK [Mostrar variáveis de entrada] ********************************************
ok: [localhost] => {
    "msg": [
        "execution_file_name = execution/machine_list_dev.yml",
        "filestore_env      = dev",
        "filestore_base_dir = dev/DEV000000007",
        "deployment_ref     = DEV000000007",
        "repo_root           = /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-sitef/ansible/..",
        "status_dir          = /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-sitef/ansible/../status/DEV000000007",
        "nexus_base_url      = https://nexus-ci.onefiserv.net/repository/raw-apm0004548-dev"
    ]
}
TASK [Criar diretório de status da TAG] ****************************************
changed: [localhost]
TASK [Carregar arquivo de execução] ********************************************
ok: [localhost]
TASK [Falhar se não tiver máquinas no arquivo de execução] *********************
skipping: [localhost]
TASK [Executar pré-deploy por máquina] *****************************************
included: /tmp/tmp.XH1y4C5mAS/elastic-compute-cloud-sitef/ansible/predeploy_per_machine.yml for localhost => (item=sitef-01)
TASK [Definir caminhos para sitef-01] ******************************************
fatal: [localhost]: FAILED! => {"msg": "An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: An unhandled exception occurred while templating '{{ status_dir }}'. Error was a &lt;class 'ansible.errors.AnsibleError'>, original message: recursive loop detected in template string: {{ status_dir }}. maximum recursion depth exceeded while calling a Python object"}
PLAY RECAP *********************************************************************
localhost                  : ok=8    changed=1    unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
Command finished with status FAILURE


# PIPELINE 1 - PREDEPLOY
# - Lê execution/<arquivo>.yml
# - Para cada máquina:
#   * carrega machine + package
#   * exporta env_vars (merge)
#   * prepara área /opt/SoftwareExpress/sitef-pipeline/deploy
#   * limpa scripts
#   * copia package.yml
#   * baixa componentes do Nexus
#   * copia scripts do repo
#   * executa init_parallel.sh
#   * gera status JSON
#   * envia JSON + LOG para Harness File Store

- name: "Predeploy a partir do arquivo de execução"
  hosts: localhost
  connection: local
  gather_facts: true

  vars:
    execution_file_name: "{{ execution_file_name | default('execution/machine_list_dev.yml') }}"
    deployment_ref: "{{ deployment_ref | default('DEV000000001') }}"
    repo_root: "{{ playbook_dir }}/.."
    status_dir: "{{ repo_root }}/status/{{ deployment_ref }}"

    # Nexus (ideal: vir do Harness Secrets)
    nexus_base_url: "{{ nexus_base_url | default('https://nexus-ci.onefiserv.net/repository/raw-apm0004548-dev') }}"
    nexus_user: "{{ nexus_user | default(omit) }}"
    nexus_password: "{{ nexus_password | default(omit) }}"

    # File Store base
    filestore_env: "dev"  # dev|cat|prd
    filestore_base_dir: "dev/{{ deployment_ref }}"

  tasks:
    - name: Resolver filestore vars sem recursão
      ansible.builtin.set_fact:
        filestore_env_resolved: "{{ filestore_env | default('dev') }}"
        filestore_base_dir_resolved: >-
          {{
            filestore_base_dir
              | default((filestore_env | default('dev')) ~ '/' ~ deployment_ref)
          }}

    - name: Resolver filestore_env
      ansible.builtin.set_fact:
        filestore_env_resolved: "{{ filestore_env | default('dev') }}"

    - name: Resolver filestore_base_dir
      ansible.builtin.set_fact:
        filestore_base_dir_resolved: >-
          {{
            filestore_base_dir
              | default(filestore_env_resolved ~ '/' ~ deployment_ref)
          }}

    - name: "Mostrar variáveis de entrada"
      ansible.builtin.debug:
        msg:
          - "execution_file_name = {{ execution_file_name }}"
          - "filestore_env      = {{ filestore_env_resolved }}"
          - "filestore_base_dir = {{ filestore_base_dir_resolved }}"
          - "deployment_ref     = {{ deployment_ref }}"
          - "repo_root           = {{ repo_root }}"
          - "status_dir          = {{ status_dir }}"
          - "nexus_base_url      = {{ nexus_base_url }}"

    - name: "Criar diretório de status da TAG"
      ansible.builtin.file:
        path: "{{ status_dir }}"
        state: directory
        mode: "0755"

    - name: "Carregar arquivo de execução"
      ansible.builtin.include_vars:
        file: "{{ repo_root }}/{{ execution_file_name }}"
        name: execution_cfg

    - name: "Falhar se não tiver máquinas no arquivo de execução"
      ansible.builtin.fail:
        msg: "Nenhuma máquina encontrada em execution_cfg.machines"
      when: execution_cfg.machines is not defined or execution_cfg.machines | length == 0

    - name: "Executar pré-deploy por máquina"
      ansible.builtin.include_tasks: predeploy_per_machine.yml
      loop: "{{ execution_cfg.machines }}"
      loop_control:
        loop_var: machine_name
      vars:
        deployment_ref: "{{ deployment_ref }}"
        status_dir: "{{ status_dir }}"
        nexus_base_url: "{{ nexus_base_url }}"
        nexus_user: "{{ nexus_user | default('') }}"
        nexus_password: "{{ nexus_password | default('') }}"
        filestore_env: "{{ filestore_env_resolved }}"
        filestore_base_dir: "{{ filestore_base_dir_resolved }}"

