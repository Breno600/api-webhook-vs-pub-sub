Exec using JSCH
Connecting to 10.218.238.144 ....
Connection to 10.218.238.144 established
Executing command ...
Clonando repo em /tmp/tmp.kGmAs1HF3k/repo...
Cloning into '/tmp/tmp.kGmAs1HF3k/repo'...
remote: Enumerating objects: 38, done.
remote: Counting objects:   2% (1/38)
remote: Counting objects:   5% (2/38)
remote: Counting objects:   7% (3/38)
remote: Counting objects:  10% (4/38)
remote: Counting objects:  13% (5/38)
remote: Counting objects:  15% (6/38)
remote: Counting objects:  18% (7/38)
remote: Counting objects:  21% (8/38)
remote: Counting objects:  23% (9/38)
remote: Counting objects:  26% (10/38)
remote: Counting objects:  28% (11/38)
remote: Counting objects:  31% (12/38)
remote: Counting objects:  34% (13/38)
remote: Counting objects:  36% (14/38)
remote: Counting objects:  39% (15/38)
remote: Counting objects:  42% (16/38)
remote: Counting objects:  44% (17/38)
remote: Counting objects:  47% (18/38)
remote: Counting objects:  50% (19/38)
remote: Counting objects:  52% (20/38)
remote: Counting objects:  55% (21/38)
remote: Counting objects:  57% (22/38)
remote: Counting objects:  60% (23/38)
remote: Counting objects:  63% (24/38)
remote: Counting objects:  65% (25/38)
remote: Counting objects:  68% (26/38)
remote: Counting objects:  71% (27/38)
remote: Counting objects:  73% (28/38)
remote: Counting objects:  76% (29/38)
remote: Counting objects:  78% (30/38)
remote: Counting objects:  81% (31/38)
remote: Counting objects:  84% (32/38)
remote: Counting objects:  86% (33/38)
remote: Counting objects:  89% (34/38)
remote: Counting objects:  92% (35/38)
remote: Counting objects:  94% (36/38)
remote: Counting objects:  97% (37/38)
remote: Counting objects: 100% (38/38)
remote: Counting objects: 100% (38/38), done.
remote: Compressing objects:   3% (1/31)
remote: Compressing objects:   6% (2/31)
remote: Compressing objects:   9% (3/31)
remote: Compressing objects:  12% (4/31)
remote: Compressing objects:  16% (5/31)
remote: Compressing objects:  19% (6/31)
remote: Compressing objects:  22% (7/31)
remote: Compressing objects:  25% (8/31)
remote: Compressing objects:  29% (9/31)
remote: Compressing objects:  32% (10/31)
remote: Compressing objects:  35% (11/31)
remote: Compressing objects:  38% (12/31)
remote: Compressing objects:  41% (13/31)
remote: Compressing objects:  45% (14/31)
remote: Compressing objects:  48% (15/31)
remote: Compressing objects:  51% (16/31)
remote: Compressing objects:  54% (17/31)
remote: Compressing objects:  58% (18/31)
remote: Compressing objects:  61% (19/31)
remote: Compressing objects:  64% (20/31)
remote: Compressing objects:  67% (21/31)
remote: Compressing objects:  70% (22/31)
remote: Compressing objects:  74% (23/31)
remote: Compressing objects:  77% (24/31)
remote: Compressing objects:  80% (25/31)
remote: Compressing objects:  83% (26/31)
remote: Compressing objects:  87% (27/31)
remote: Compressing objects:  90% (28/31)
remote: Compressing objects:  93% (29/31)
remote: Compressing objects:  96% (30/31)
remote: Compressing objects: 100% (31/31)
remote: Compressing objects: 100% (31/31), done.
remote: Total 38 (delta 13), reused 0 (delta 0), pack-reused 0
Receiving objects:   2% (1/38)
Receiving objects:   5% (2/38)
Receiving objects:   7% (3/38)
Receiving objects:  10% (4/38)
Receiving objects:  13% (5/38)
Receiving objects:  15% (6/38)
Receiving objects:  18% (7/38)
Receiving objects:  21% (8/38)
Receiving objects:  23% (9/38)
Receiving objects:  26% (10/38)
Receiving objects:  28% (11/38)
Receiving objects:  31% (12/38)
Receiving objects:  34% (13/38)
Receiving objects:  36% (14/38)
Receiving objects:  39% (15/38)
Receiving objects:  42% (16/38)
Receiving objects:  44% (17/38)
Receiving objects:  47% (18/38)
Receiving objects:  50% (19/38)
Receiving objects:  52% (20/38)
Receiving objects:  55% (21/38)
Receiving objects:  57% (22/38)
Receiving objects:  60% (23/38)
Receiving objects:  63% (24/38)
Receiving objects:  65% (25/38)
Receiving objects:  68% (26/38)
Receiving objects:  71% (27/38)
Receiving objects:  73% (28/38)
Receiving objects:  76% (29/38)
Receiving objects:  78% (30/38)
Receiving objects:  81% (31/38)
Receiving objects:  84% (32/38)
Receiving objects:  86% (33/38)
Receiving objects:  89% (34/38)
Receiving objects:  92% (35/38)
Receiving objects:  94% (36/38)
Receiving objects:  97% (37/38)
Receiving objects: 100% (38/38)
Receiving objects: 100% (38/38), 7.20 KiB | 7.20 MiB/s, done.
Resolving deltas:   0% (0/13)
Resolving deltas:   7% (1/13)
Resolving deltas:  15% (2/13)
Resolving deltas:  23% (3/13)
Resolving deltas:  30% (4/13)
Resolving deltas:  38% (5/13)
Resolving deltas:  46% (6/13)
Resolving deltas:  53% (7/13)
Resolving deltas:  61% (8/13)
Resolving deltas:  69% (9/13)
Resolving deltas:  76% (10/13)
Resolving deltas:  84% (11/13)
Resolving deltas:  92% (12/13)
Resolving deltas: 100% (13/13)
Resolving deltas: 100% (13/13), done.
ConteÃºdo do repo:
total 8
drwxr-x---. 7 ec2-user ec2-user   98 Jan  8 18:06 .
drwx------. 3 ec2-user ec2-user   18 Jan  8 18:06 ..
drwxr-x---. 3 ec2-user ec2-user   42 Jan  8 18:06 ansible
drwxr-x---. 2 ec2-user ec2-user   27 Jan  8 18:06 execution
drwxr-x---. 8 ec2-user ec2-user  163 Jan  8 18:06 .git
drwxr-x---. 2 ec2-user ec2-user   26 Jan  8 18:06 machines
-rw-r-----. 1 ec2-user ec2-user 6376 Jan  8 18:06 README.md
drwxr-x---. 2 ec2-user ec2-user   21 Jan  8 18:06 scripts
PWD do repo:
/tmp/tmp.kGmAs1HF3k/repo
PLAY [Build dynamic target list from execution + machines folder] **************
TASK [Resolve paths] ***********************************************************
ok: [localhost]
TASK [Load execution file] *****************************************************
ok: [localhost]
TASK [Validate execution targets] **********************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}
TASK [Check machine files exist] ***********************************************
ok: [localhost] => (item=sitef-02)
TASK [Fail if any machine file is missing] *************************************
ok: [localhost] => (item={'changed': False, 'stat': {'exists': True, 'path': '../../machines/sitef-02.yml', 'mode': '0640', 'isdir': False, 'ischr': False, 'isblk': False, 'isreg': True, 'isfifo': False, 'islnk': False, 'issock': False, 'uid': 1000, 'gid': 1000, 'size': 253, 'inode': 146, 'dev': 64775, 'nlink': 1, 'atime': 1767895604.982922, 'mtime': 1767895604.9729218, 'ctime': 1767895604.9729218, 'wusr': True, 'rusr': True, 'xusr': False, 'wgrp': False, 'rgrp': True, 'xgrp': False, 'woth': False, 'roth': False, 'xoth': False, 'isuid': False, 'isgid': False, 'blocks': 8, 'block_size': 4096, 'device_type': 0, 'readable': True, 'writeable': True, 'executable': False, 'pw_name': 'ec2-user', 'gr_name': 'ec2-user', 'checksum': 'b607fdf55dac2409db597a628248835d3329d5b4', 'mimetype': 'text/plain', 'charset': 'us-ascii', 'version': '3432658088', 'attributes': [], 'attr_flags': ''}, 'invocation': {'module_args': {'path': '../../machines/sitef-02.yml', 'follow': False, 'get_md5': False, 'get_checksum': True, 'get_mime': True, 'get_attributes': True, 'checksum_algorithm': 'sha1'}}, 'ansible_facts': {'discovered_interpreter_python': '/usr/bin/python3'}, 'failed': False, 'item': 'sitef-02', 'ansible_loop_var': 'item'}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python3"
        },
        "ansible_loop_var": "item",
        "changed": false,
        "failed": false,
        "invocation": {
            "module_args": {
                "checksum_algorithm": "sha1",
                "follow": false,
                "get_attributes": true,
                "get_checksum": true,
                "get_md5": false,
                "get_mime": true,
                "path": "../../machines/sitef-02.yml"
            }
        },
        "item": "sitef-02",
        "stat": {
            "atime": 1767895604.982922,
            "attr_flags": "",
            "attributes": [],
            "block_size": 4096,
            "blocks": 8,
            "charset": "us-ascii",
            "checksum": "b607fdf55dac2409db597a628248835d3329d5b4",
            "ctime": 1767895604.9729218,
            "dev": 64775,
            "device_type": 0,
            "executable": false,
            "exists": true,
            "gid": 1000,
            "gr_name": "ec2-user",
            "inode": 146,
            "isblk": false,
            "ischr": false,
            "isdir": false,
            "isfifo": false,
            "isgid": false,
            "islnk": false,
            "isreg": true,
            "issock": false,
            "isuid": false,
            "mimetype": "text/plain",
            "mode": "0640",
            "mtime": 1767895604.9729218,
            "nlink": 1,
            "path": "../../machines/sitef-02.yml",
            "pw_name": "ec2-user",
            "readable": true,
            "rgrp": true,
            "roth": false,
            "rusr": true,
            "size": 253,
            "uid": 1000,
            "version": "3432658088",
            "wgrp": false,
            "woth": false,
            "writeable": true,
            "wusr": true,
            "xgrp": false,
            "xoth": false,
            "xusr": false
        }
    },
    "msg": "All assertions passed"
}
TASK [Load machine definitions] ************************************************
ok: [localhost] => (item=sitef-02)
TASK [Add targets dynamically (per machine vars)] ******************************
changed: [localhost] => (item=sitef-02)
TASK [Show selected targets] ***************************************************
ok: [localhost] => {
    "msg": [
        "Execution file: ../../execution/execution.yml",
        "Machines dir: ../../machines",
        "Selected targets: ['sitef-02']"
    ]
}
PLAY [Deliver to selected machines (download from S3 + run script)] ************
TASK [Gathering Facts] *********************************************************
ok: [sitef-02]
TASK [Ensure directories exist] ************************************************
ok: [sitef-02] => (item=/opt/SoftwareExpress/sitef)
ok: [sitef-02] => (item=/opt/SoftwareExpress/sitef)
TASK [Copy scripts to target] **************************************************
changed: [sitef-02]
TASK [Check AWS CLI exists on target] ******************************************
fatal: [sitef-02]: FAILED! => {"changed": false, "cmd": "aws --version", "msg": "[Errno 2] No such file or directory: b'aws'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
PLAY RECAP *********************************************************************
localhost                  : ok=8    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
sitef-02                   : ok=3    changed=1    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
Command finished with status FAILURE
