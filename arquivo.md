Exec using JSCH
Connecting to 10.218.238.144 ....
Connection to 10.218.238.144 established
Executing command ...
export GIT_TAG=DEV000002
Clonando repo em /tmp/tmp.1YD7BxxEHN...
Cloning into '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef'...
remote: Enumerating objects: 1040, done.
remote: Counting objects:   0% (1/990)
remote: Counting objects:   1% (10/990)
remote: Counting objects:   2% (20/990)
remote: Counting objects:   3% (30/990)
remote: Counting objects:   4% (40/990)
remote: Counting objects:   5% (50/990)
remote: Counting objects:   6% (60/990)
remote: Counting objects:   7% (70/990)
remote: Counting objects:   8% (80/990)
remote: Counting objects:   9% (90/990)
remote: Counting objects:  10% (99/990)
remote: Counting objects:  11% (109/990)
remote: Counting objects:  12% (119/990)
remote: Counting objects:  13% (129/990)
remote: Counting objects:  14% (139/990)
remote: Counting objects:  15% (149/990)
remote: Counting objects:  16% (159/990)
remote: Counting objects:  17% (169/990)
remote: Counting objects:  18% (179/990)
remote: Counting objects:  19% (189/990)
remote: Counting objects:  20% (198/990)
remote: Counting objects:  21% (208/990)
remote: Counting objects:  22% (218/990)
remote: Counting objects:  23% (228/990)
remote: Counting objects:  24% (238/990)
remote: Counting objects:  25% (248/990)
remote: Counting objects:  26% (258/990)
remote: Counting objects:  27% (268/990)
remote: Counting objects:  28% (278/990)
remote: Counting objects:  29% (288/990)
remote: Counting objects:  30% (297/990)
remote: Counting objects:  31% (307/990)
remote: Counting objects:  32% (317/990)
remote: Counting objects:  33% (327/990)
remote: Counting objects:  34% (337/990)
remote: Counting objects:  35% (347/990)
remote: Counting objects:  36% (357/990)
remote: Counting objects:  37% (367/990)
remote: Counting objects:  38% (377/990)
remote: Counting objects:  39% (387/990)
remote: Counting objects:  40% (396/990)
remote: Counting objects:  41% (406/990)
remote: Counting objects:  42% (416/990)
remote: Counting objects:  43% (426/990)
remote: Counting objects:  44% (436/990)
remote: Counting objects:  45% (446/990)
remote: Counting objects:  46% (456/990)
remote: Counting objects:  47% (466/990)
remote: Counting objects:  48% (476/990)
remote: Counting objects:  49% (486/990)
remote: Counting objects:  50% (495/990)
remote: Counting objects:  51% (505/990)
remote: Counting objects:  52% (515/990)
remote: Counting objects:  53% (525/990)
remote: Counting objects:  54% (535/990)
remote: Counting objects:  55% (545/990)
remote: Counting objects:  56% (555/990)
remote: Counting objects:  57% (565/990)
remote: Counting objects:  58% (575/990)
remote: Counting objects:  59% (585/990)
remote: Counting objects:  60% (594/990)
remote: Counting objects:  61% (604/990)
remote: Counting objects:  62% (614/990)
remote: Counting objects:  63% (624/990)
remote: Counting objects:  64% (634/990)
remote: Counting objects:  65% (644/990)
remote: Counting objects:  66% (654/990)
remote: Counting objects:  67% (664/990)
remote: Counting objects:  68% (674/990)
remote: Counting objects:  69% (684/990)
remote: Counting objects:  70% (693/990)
remote: Counting objects:  71% (703/990)
remote: Counting objects:  72% (713/990)
remote: Counting objects:  73% (723/990)
remote: Counting objects:  74% (733/990)
remote: Counting objects:  75% (743/990)
remote: Counting objects:  76% (753/990)
remote: Counting objects:  77% (763/990)
remote: Counting objects:  78% (773/990)
remote: Counting objects:  79% (783/990)
remote: Counting objects:  80% (792/990)
remote: Counting objects:  81% (802/990)
remote: Counting objects:  82% (812/990)
remote: Counting objects:  83% (822/990)
remote: Counting objects:  84% (832/990)
remote: Counting objects:  85% (842/990)
remote: Counting objects:  86% (852/990)
remote: Counting objects:  87% (862/990)
remote: Counting objects:  88% (872/990)
remote: Counting objects:  89% (882/990)
remote: Counting objects:  90% (891/990)
remote: Counting objects:  91% (901/990)
remote: Counting objects:  92% (911/990)
remote: Counting objects:  93% (921/990)
remote: Counting objects:  94% (931/990)
remote: Counting objects:  95% (941/990)
remote: Counting objects:  96% (951/990)
remote: Counting objects:  97% (961/990)
remote: Counting objects:  98% (971/990)
remote: Counting objects:  99% (981/990)
remote: Counting objects: 100% (990/990)
remote: Counting objects: 100% (990/990), done.
remote: Compressing objects:   0% (1/975)
remote: Compressing objects:   1% (10/975)
remote: Compressing objects:   2% (20/975)
remote: Compressing objects:   3% (30/975)
remote: Compressing objects:   4% (39/975)
remote: Compressing objects:   5% (49/975)
remote: Compressing objects:   6% (59/975)
remote: Compressing objects:   7% (69/975)
remote: Compressing objects:   8% (78/975)
remote: Compressing objects:   9% (88/975)
remote: Compressing objects:  10% (98/975)
remote: Compressing objects:  11% (108/975)
remote: Compressing objects:  12% (117/975)
remote: Compressing objects:  13% (127/975)
remote: Compressing objects:  14% (137/975)
remote: Compressing objects:  15% (147/975)
remote: Compressing objects:  16% (156/975)
remote: Compressing objects:  17% (166/975)
remote: Compressing objects:  18% (176/975)
remote: Compressing objects:  19% (186/975)
remote: Compressing objects:  20% (195/975)
remote: Compressing objects:  21% (205/975)
remote: Compressing objects:  22% (215/975)
remote: Compressing objects:  23% (225/975)
remote: Compressing objects:  24% (234/975)
remote: Compressing objects:  25% (244/975)
remote: Compressing objects:  26% (254/975)
remote: Compressing objects:  27% (264/975)
remote: Compressing objects:  28% (273/975)
remote: Compressing objects:  29% (283/975)
remote: Compressing objects:  30% (293/975)
remote: Compressing objects:  31% (303/975)
remote: Compressing objects:  32% (312/975)
remote: Compressing objects:  33% (322/975)
remote: Compressing objects:  34% (332/975)
remote: Compressing objects:  35% (342/975)
remote: Compressing objects:  36% (351/975)
remote: Compressing objects:  37% (361/975)
remote: Compressing objects:  38% (371/975)
remote: Compressing objects:  39% (381/975)
remote: Compressing objects:  40% (390/975)
remote: Compressing objects:  41% (400/975)
remote: Compressing objects:  42% (410/975)
remote: Compressing objects:  43% (420/975)
remote: Compressing objects:  44% (429/975)
remote: Compressing objects:  45% (439/975)
remote: Compressing objects:  46% (449/975)
remote: Compressing objects:  47% (459/975)
remote: Compressing objects:  48% (468/975)
remote: Compressing objects:  49% (478/975)
remote: Compressing objects:  50% (488/975)
remote: Compressing objects:  51% (498/975)
remote: Compressing objects:  52% (507/975)
remote: Compressing objects:  53% (517/975)
remote: Compressing objects:  54% (527/975)
remote: Compressing objects:  55% (537/975)
remote: Compressing objects:  56% (546/975)
remote: Compressing objects:  57% (556/975)
remote: Compressing objects:  58% (566/975)
remote: Compressing objects:  59% (576/975)
remote: Compressing objects:  60% (585/975)
remote: Compressing objects:  61% (595/975)
remote: Compressing objects:  62% (605/975)
remote: Compressing objects:  63% (615/975)
remote: Compressing objects:  64% (624/975)
remote: Compressing objects:  65% (634/975)
remote: Compressing objects:  66% (644/975)
remote: Compressing objects:  67% (654/975)
remote: Compressing objects:  68% (663/975)
remote: Compressing objects:  69% (673/975)
remote: Compressing objects:  70% (683/975)
remote: Compressing objects:  71% (693/975)
remote: Compressing objects:  72% (702/975)
remote: Compressing objects:  73% (712/975)
remote: Compressing objects:  74% (722/975)
remote: Compressing objects:  75% (732/975)
remote: Compressing objects:  76% (741/975)
remote: Compressing objects:  77% (751/975)
remote: Compressing objects:  78% (761/975)
remote: Compressing objects:  79% (771/975)
remote: Compressing objects:  80% (780/975)
remote: Compressing objects:  81% (790/975)
remote: Compressing objects:  82% (800/975)
remote: Compressing objects:  83% (810/975)
remote: Compressing objects:  84% (819/975)
remote: Compressing objects:  85% (829/975)
remote: Compressing objects:  86% (839/975)
remote: Compressing objects:  87% (849/975)
remote: Compressing objects:  88% (858/975)
remote: Compressing objects:  89% (868/975)
remote: Compressing objects:  90% (878/975)
remote: Compressing objects:  91% (888/975)
remote: Compressing objects:  92% (897/975)
remote: Compressing objects:  93% (907/975)
remote: Compressing objects:  94% (917/975)
remote: Compressing objects:  95% (927/975)
remote: Compressing objects:  96% (936/975)
remote: Compressing objects:  97% (946/975)
remote: Compressing objects:  98% (956/975)
remote: Compressing objects:  99% (966/975)
remote: Compressing objects: 100% (975/975)
remote: Compressing objects: 100% (975/975), done.
Receiving objects:   0% (1/1040)
Receiving objects:   1% (11/1040)
Receiving objects:   2% (21/1040)
Receiving objects:   3% (32/1040)
Receiving objects:   4% (42/1040)
Receiving objects:   5% (52/1040)
Receiving objects:   6% (63/1040)
Receiving objects:   7% (73/1040)
Receiving objects:   8% (84/1040)
Receiving objects:   9% (94/1040)
Receiving objects:  10% (104/1040)
Receiving objects:  11% (115/1040)
Receiving objects:  12% (125/1040)
Receiving objects:  13% (136/1040)
Receiving objects:  14% (146/1040)
Receiving objects:  15% (156/1040)
Receiving objects:  16% (167/1040)
Receiving objects:  17% (177/1040)
Receiving objects:  18% (188/1040)
Receiving objects:  19% (198/1040)
Receiving objects:  20% (208/1040)
Receiving objects:  21% (219/1040)
Receiving objects:  22% (229/1040)
Receiving objects:  23% (240/1040)
Receiving objects:  24% (250/1040)
Receiving objects:  25% (260/1040)
Receiving objects:  26% (271/1040)
Receiving objects:  27% (281/1040)
Receiving objects:  28% (292/1040)
Receiving objects:  29% (302/1040)
Receiving objects:  30% (312/1040)
Receiving objects:  31% (323/1040)
Receiving objects:  32% (333/1040)
Receiving objects:  33% (344/1040)
Receiving objects:  34% (354/1040)
Receiving objects:  35% (364/1040)
Receiving objects:  36% (375/1040)
Receiving objects:  37% (385/1040)
Receiving objects:  38% (396/1040)
Receiving objects:  39% (406/1040)
Receiving objects:  40% (416/1040)
Receiving objects:  41% (427/1040)
Receiving objects:  42% (437/1040)
Receiving objects:  43% (448/1040)
Receiving objects:  44% (458/1040)
Receiving objects:  45% (468/1040)
Receiving objects:  46% (479/1040)
Receiving objects:  47% (489/1040)
Receiving objects:  48% (500/1040)
Receiving objects:  49% (510/1040)
Receiving objects:  50% (520/1040)
Receiving objects:  51% (531/1040)
Receiving objects:  52% (541/1040)
Receiving objects:  53% (552/1040)
Receiving objects:  54% (562/1040)
Receiving objects:  55% (572/1040)
Receiving objects:  56% (583/1040)
Receiving objects:  57% (593/1040)
Receiving objects:  58% (604/1040)
Receiving objects:  59% (614/1040)
Receiving objects:  60% (624/1040)
Receiving objects:  61% (635/1040)
Receiving objects:  62% (645/1040)
Receiving objects:  63% (656/1040)
Receiving objects:  64% (666/1040)
Receiving objects:  65% (676/1040)
Receiving objects:  66% (687/1040)
Receiving objects:  67% (697/1040)
Receiving objects:  68% (708/1040)
Receiving objects:  69% (718/1040)
Receiving objects:  70% (728/1040)
Receiving objects:  71% (739/1040)
Receiving objects:  72% (749/1040)
Receiving objects:  73% (760/1040)
Receiving objects:  74% (770/1040)
Receiving objects:  75% (780/1040)
Receiving objects:  76% (791/1040)
Receiving objects:  77% (801/1040)
Receiving objects:  78% (812/1040)
Receiving objects:  79% (822/1040)
Receiving objects:  80% (832/1040)
Receiving objects:  81% (843/1040)
Receiving objects:  82% (853/1040)
Receiving objects:  83% (864/1040)
remote: Total 1040 (delta 699), reused 0 (delta 0), pack-reused 50
Receiving objects:  84% (874/1040)
Receiving objects:  85% (884/1040)
Receiving objects:  86% (895/1040)
Receiving objects:  87% (905/1040)
Receiving objects:  88% (916/1040)
Receiving objects:  89% (926/1040)
Receiving objects:  90% (936/1040)
Receiving objects:  91% (947/1040)
Receiving objects:  92% (957/1040)
Receiving objects:  93% (968/1040)
Receiving objects:  94% (978/1040)
Receiving objects:  95% (988/1040)
Receiving objects:  96% (999/1040)
Receiving objects:  97% (1009/1040)
Receiving objects:  98% (1020/1040)
Receiving objects:  99% (1030/1040)
Receiving objects: 100% (1040/1040)
Receiving objects: 100% (1040/1040), 969.45 KiB | 2.43 MiB/s, done.
Resolving deltas:   0% (0/718)
Resolving deltas:   1% (8/718)
Resolving deltas:   2% (15/718)
Resolving deltas:   3% (22/718)
Resolving deltas:   4% (29/718)
Resolving deltas:   5% (36/718)
Resolving deltas:   6% (44/718)
Resolving deltas:   7% (51/718)
Resolving deltas:   8% (58/718)
Resolving deltas:   9% (65/718)
Resolving deltas:  10% (72/718)
Resolving deltas:  11% (79/718)
Resolving deltas:  12% (87/718)
Resolving deltas:  13% (94/718)
Resolving deltas:  14% (101/718)
Resolving deltas:  15% (108/718)
Resolving deltas:  16% (115/718)
Resolving deltas:  17% (123/718)
Resolving deltas:  18% (130/718)
Resolving deltas:  19% (137/718)
Resolving deltas:  20% (144/718)
Resolving deltas:  21% (151/718)
Resolving deltas:  22% (158/718)
Resolving deltas:  23% (166/718)
Resolving deltas:  24% (173/718)
Resolving deltas:  25% (180/718)
Resolving deltas:  26% (187/718)
Resolving deltas:  27% (194/718)
Resolving deltas:  28% (202/718)
Resolving deltas:  29% (209/718)
Resolving deltas:  30% (216/718)
Resolving deltas:  31% (223/718)
Resolving deltas:  32% (230/718)
Resolving deltas:  33% (237/718)
Resolving deltas:  34% (245/718)
Resolving deltas:  35% (252/718)
Resolving deltas:  36% (259/718)
Resolving deltas:  37% (266/718)
Resolving deltas:  38% (273/718)
Resolving deltas:  39% (281/718)
Resolving deltas:  40% (288/718)
Resolving deltas:  41% (295/718)
Resolving deltas:  42% (302/718)
Resolving deltas:  43% (309/718)
Resolving deltas:  44% (316/718)
Resolving deltas:  45% (324/718)
Resolving deltas:  46% (331/718)
Resolving deltas:  47% (339/718)
Resolving deltas:  48% (345/718)
Resolving deltas:  49% (352/718)
Resolving deltas:  50% (359/718)
Resolving deltas:  51% (367/718)
Resolving deltas:  52% (374/718)
Resolving deltas:  53% (381/718)
Resolving deltas:  54% (388/718)
Resolving deltas:  55% (395/718)
Resolving deltas:  56% (403/718)
Resolving deltas:  57% (410/718)
Resolving deltas:  58% (417/718)
Resolving deltas:  59% (424/718)
Resolving deltas:  60% (431/718)
Resolving deltas:  61% (438/718)
Resolving deltas:  62% (446/718)
Resolving deltas:  63% (454/718)
Resolving deltas:  64% (460/718)
Resolving deltas:  65% (467/718)
Resolving deltas:  66% (474/718)
Resolving deltas:  67% (482/718)
Resolving deltas:  68% (489/718)
Resolving deltas:  69% (496/718)
Resolving deltas:  70% (503/718)
Resolving deltas:  71% (510/718)
Resolving deltas:  72% (517/718)
Resolving deltas:  73% (525/718)
Resolving deltas:  74% (532/718)
Resolving deltas:  75% (539/718)
Resolving deltas:  76% (546/718)
Resolving deltas:  77% (553/718)
Resolving deltas:  78% (561/718)
Resolving deltas:  79% (568/718)
Resolving deltas:  80% (575/718)
Resolving deltas:  81% (582/718)
Resolving deltas:  82% (589/718)
Resolving deltas:  83% (596/718)
Resolving deltas:  84% (604/718)
Resolving deltas:  85% (611/718)
Resolving deltas:  86% (618/718)
Resolving deltas:  87% (625/718)
Resolving deltas:  88% (632/718)
Resolving deltas:  89% (640/718)
Resolving deltas:  90% (647/718)
Resolving deltas:  91% (654/718)
Resolving deltas:  92% (661/718)
Resolving deltas:  93% (668/718)
Resolving deltas:  94% (675/718)
Resolving deltas:  95% (683/718)
Resolving deltas:  96% (690/718)
Resolving deltas:  97% (697/718)
Resolving deltas:  98% (704/718)
Resolving deltas:  99% (711/718)
Resolving deltas: 100% (718/718)
Resolving deltas: 100% (718/718), done.
== PIPELINE PREDEPLOY ==
TAG   : DEV000002
EXEC  : execution/machine_list_dev.yml
BRANCH: develop-testes
PLAY [Predeploy a partir do arquivo de execução] *******************************
TASK [Gathering Facts] *********************************************************
ok: [localhost]
TASK [Resolver filestore_env e filestore_base_dir sem recursão] ****************
ok: [localhost]
TASK [Mostrar variáveis de entrada e resolvidas] *******************************
ok: [localhost] => {
    "msg": [
        "execution_file_name_resolved = execution/machine_list_dev.yml",
        "deployment_ref_resolved      = DEV000002",
        "repo_root_resolved           = /tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/..",
        "status_dir_resolved          = /tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../status/DEV000002",
        "filestore_env_resolved       = dev",
        "filestore_base_dir_resolved  = dev/DEV000002",
        "nexus_base_url_resolved      = https://nexus-ci.onefiserv.net/repository/raw-apm0004548-dev"
    ]
}
TASK [Criar diretório de status da TAG] ****************************************
changed: [localhost]
TASK [Carregar arquivo de execução] ********************************************
ok: [localhost]
TASK [Falhar se não tiver máquinas no arquivo de execução] *********************
skipping: [localhost]
TASK [Executar pré-deploy por máquina] *****************************************
included: /tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/predeploy_per_machine.yml for localhost => (item=sitef-02)
TASK [Predeploy | Resolver nome da máquina atual] ******************************
ok: [localhost]
TASK [Predeploy | Validar vars mínimas] ****************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}
TASK [Predeploy | Definir paths base do repositório] ***************************
ok: [localhost]
TASK [Predeploy | Definir candidatos de arquivo da máquina] ********************
ok: [localhost]
TASK [Predeploy | Verificar candidatos] ****************************************
ok: [localhost] => (item=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../execution/machines/sitef-02.yml)
ok: [localhost] => (item=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../execution/sitef-02.yml)
ok: [localhost] => (item=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../machines/sitef-02.yml)
ok: [localhost] => (item=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../inventory/machines/sitef-02.yml)
TASK [Predeploy | Selecionar machine_file existente] ***************************
skipping: [localhost] => (item={'changed': False, 'stat': {'exists': False}, 'invocation': {'module_args': {'path': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../execution/machines/sitef-02.yml', 'follow': False, 'get_md5': False, 'get_checksum': True, 'get_mime': True, 'get_attributes': True, 'checksum_algorithm': 'sha1'}}, 'failed': False, 'item': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../execution/machines/sitef-02.yml', 'ansible_loop_var': 'item'}) 
skipping: [localhost] => (item={'changed': False, 'stat': {'exists': False}, 'invocation': {'module_args': {'path': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../execution/sitef-02.yml', 'follow': False, 'get_md5': False, 'get_checksum': True, 'get_mime': True, 'get_attributes': True, 'checksum_algorithm': 'sha1'}}, 'failed': False, 'item': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../execution/sitef-02.yml', 'ansible_loop_var': 'item'}) 
ok: [localhost] => (item={'changed': False, 'stat': {'exists': True, 'path': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../machines/sitef-02.yml', 'mode': '0640', 'isdir': False, 'ischr': False, 'isblk': False, 'isreg': True, 'isfifo': False, 'islnk': False, 'issock': False, 'uid': 1000, 'gid': 1000, 'size': 248, 'inode': 2113881, 'dev': 64775, 'nlink': 1, 'atime': 1766610691.1172652, 'mtime': 1766610691.106265, 'ctime': 1766610691.106265, 'wusr': True, 'rusr': True, 'xusr': False, 'wgrp': False, 'rgrp': True, 'xgrp': False, 'woth': False, 'roth': False, 'xoth': False, 'isuid': False, 'isgid': False, 'blocks': 8, 'block_size': 4096, 'device_type': 0, 'readable': True, 'writeable': True, 'executable': False, 'pw_name': 'ec2-user', 'gr_name': 'ec2-user', 'checksum': '005e3367129d5aefc77f49fd9fe62b4e58c51cd5', 'mimetype': 'text/plain', 'charset': 'us-ascii', 'version': '3943113696', 'attributes': [], 'attr_flags': ''}, 'invocation': {'module_args': {'path': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../machines/sitef-02.yml', 'follow': False, 'get_md5': False, 'get_checksum': True, 'get_mime': True, 'get_attributes': True, 'checksum_algorithm': 'sha1'}}, 'failed': False, 'item': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../machines/sitef-02.yml', 'ansible_loop_var': 'item'})
skipping: [localhost] => (item={'changed': False, 'stat': {'exists': False}, 'invocation': {'module_args': {'path': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../inventory/machines/sitef-02.yml', 'follow': False, 'get_md5': False, 'get_checksum': True, 'get_mime': True, 'get_attributes': True, 'checksum_algorithm': 'sha1'}}, 'failed': False, 'item': '/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../inventory/machines/sitef-02.yml', 'ansible_loop_var': 'item'}) 
TASK [Predeploy | Falhar se arquivo da máquina não existir] ********************
skipping: [localhost]
TASK [Predeploy | Carregar config da máquina sitef-02] *************************
ok: [localhost]
TASK [Predeploy | Validar package definido] ************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}
TASK [Predeploy | Carregar config do pacote sitef-core-0.0.1-0] ****************
ok: [localhost]
TASK [Predeploy | Validar components do pacote] ********************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}
TASK [Predeploy | Validar script do pacote] ************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}
TASK [Predeploy | Definir usuário alvo padrão] *********************************
ok: [localhost]
TASK [Predeploy | Definir ssh_common_args padrão] ******************************
ok: [localhost]
TASK [Predeploy | Aplicar ProxyJump via bastion (quando necessário)] ***********
skipping: [localhost]
TASK [Predeploy | Registrar host dinâmico para sitef-02] ***********************
changed: [localhost]
TASK [Predeploy | Montar env final (package base + machine override)] **********
ok: [localhost]
TASK [Predeploy | Normalizações] ***********************************************
ok: [localhost]
TASK [Predeploy | Gerar run_id] ************************************************
ok: [localhost]
TASK [Predeploy | Definir arquivos/diretórios locais] **************************
ok: [localhost]
TASK [Predeploy | Definir paths lógicos (File Store) SEPARADOS POR STAGE] ******
ok: [localhost]
TASK [Predeploy | Garantir diretório de status local] **************************
changed: [localhost]
TASK [Predeploy | Garantir arquivo pipeline.log (cumulativo local)] ************
changed: [localhost]
TASK [Predeploy | Verificar se status.json já existe] **************************
ok: [localhost]
TASK [Predeploy | Ler status.json existente (se existir)] **********************
skipping: [localhost]
TASK [Predeploy | Parse do status existente (ou base vazio)] *******************
ok: [localhost]
TASK [Predeploy | Escrever status inicial (predeploy:queued) com history append] ***
changed: [localhost]
TASK [Predeploy | Definir diretórios remotos do pipeline] **********************
ok: [localhost]
TASK [Predeploy | Garantir base do pipeline no host] ***************************
ok: [localhost -> sitef-02(100.99.57.128)] => (item=/opt/SoftwareExpress/sitef-pipeline/deploy/components)
ok: [localhost -> sitef-02(100.99.57.128)] => (item=/opt/SoftwareExpress/sitef-pipeline/deploy/scripts)
ok: [localhost -> sitef-02(100.99.57.128)] => (item=/opt/SoftwareExpress/sitef-pipeline/deploy/scripts/package)
TASK [Predeploy | Limpar pasta de scripts do pacote] ***************************
changed: [localhost -> sitef-02(100.99.57.128)]
TASK [Predeploy | Recriar pasta de scripts do pacote] **************************
changed: [localhost -> sitef-02(100.99.57.128)]
TASK [Predeploy | Copiar package.yml para o host] ******************************
changed: [localhost -> sitef-02(100.99.57.128)]
TASK [Predeploy | Garantir diretórios dos componentes no host] *****************
ok: [localhost -> sitef-02(100.99.57.128)] => (item=packages/linux/sitef-core-0.0.1-0.x86_64.rpm)
TASK [Predeploy | Baixar componentes do Nexus] *********************************
ok: [localhost -> sitef-02(100.99.57.128)] => (item=packages/linux/sitef-core-0.0.1-0.x86_64.rpm)
TASK [Predeploy | Copiar scripts do pacote para o host] ************************
ok: [localhost -> sitef-02(100.99.57.128)]
TASK [Predeploy | Executar init_parallel.sh no host (com log + stdout)] ********
changed: [localhost -> sitef-02(100.99.57.128)]
TASK [Predeploy | Tail do init_parallel.log (sempre)] **************************
ok: [localhost -> sitef-02(100.99.57.128)]
TASK [Predeploy | Montar conteúdo do log (bloco predeploy)] ********************
ok: [localhost]
TASK [Predeploy | Append do bloco no pipeline.log (controller)] ****************
changed: [localhost]
TASK [Predeploy | Carregar conteúdo completo do pipeline.log (controller)] *****
ok: [localhost]
TASK [Predeploy | Ler status.json atual] ***************************************
ok: [localhost]
TASK [Predeploy | Parse do status atual] ***************************************
ok: [localhost]
TASK [Predeploy | Atualizar status final (append em history)] ******************
changed: [localhost]
TASK [Predeploy | Upload JSON + LOG para Harness File Store (sempre)] **********
included: /tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/harness_filestore_upload.yml for localhost
TASK [Harness | Resolver variáveis base via ENV (com fallback)] ****************
ok: [localhost]
TASK [Harness | Definir contexto (deploy/env/stage/machine)] *******************
ok: [localhost]
TASK [Harness | Validar se pode tentar upload] *********************************
ok: [localhost]
TASK [Harness | DEBUG - variáveis principais] **********************************
ok: [localhost] => {
    "msg": [
        "hf_can_upload=True",
        "hf_endpoint=https://harness.onefiserv.net",
        "hf_account=fgDto6qoTT6ctfZS9eWbEw",
        "hf_org=Fiserv",
        "hf_project=sitef",
        "hf_deploy_ref=DEV000002",
        "hf_env=dev",
        "hf_stage=predeploy",
        "hf_machine=sitef-02",
        "hf_parent=Root",
        "pat_len=72"
    ]
}
TASK [Harness | Se não puder upload, só avisar e sair] *************************
skipping: [localhost]
TASK [Harness | Resolver arquivos locais recebidos (sem recursão)] *************
ok: [localhost]
TASK [Harness | Se log não foi passado, derivar do diretório do status.json] ***
ok: [localhost]
TASK [Harness | Stat status.json / pipeline.log] *******************************
ok: [localhost] => (item=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../status/DEV000002/sitef-02/status.json)
ok: [localhost] => (item=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../status/DEV000002/sitef-02/pipeline.log)
TASK [Harness | Resolver existências] ******************************************
ok: [localhost]
TASK [Harness | Criar tmp dir (controller)] ************************************
changed: [localhost]
TASK [Harness | Preparar arquivo STATUS para upload (se existir)] **************
changed: [localhost]
TASK [Harness | Se pipeline.log existir, copiar] *******************************
changed: [localhost]
TASK [Harness | Se pipeline.log NÃO existir, criar via log_content] ************
skipping: [localhost]
TASK [Harness | Calcular nomes/identifiers] ************************************
ok: [localhost]
TASK [Harness | DEBUG - arquivos finais] ***************************************
ok: [localhost] => {
    "msg": [
        "status_file_candidate=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../status/DEV000002/sitef-02/status.json exists=True",
        "log_file_candidate=/tmp/tmp.1YD7BxxEHN/elastic-compute-cloud-sitef/ansible/../status/DEV000002/sitef-02/pipeline.log exists=True",
        "tmpdir=/tmp/ansible.ufinwh5whf_upload",
        "hf_url=https://harness.onefiserv.net/ng/api/file-store?accountIdentifier=fgDto6qoTT6ctfZS9eWbEw&amp;orgIdentifier=Fiserv&amp;projectIdentifier=sitef",
        "LOG_NAME=dev__DEV000002__dev000002-sitef-02-dev-predeploy-1766610693.log IDENT=dev000002-sitef-02-dev-predeploy-1766610693-log",
        "STATUS_NAME=dev__DEV000002__dev000002-sitef-02-dev-predeploy-1766610693.json IDENT=dev000002-sitef-02-dev-predeploy-1766610693-status"
    ]
}
TASK [Harness | Enviar LOG] ****************************************************
changed: [localhost]
TASK [Harness | Extrair HTTP_CODE LOG] *****************************************
ok: [localhost]
TASK [Harness | Mostrar resultado upload LOG] **********************************
ok: [localhost]
TASK [Harness | Avisar se LOG não for 2xx] *************************************
ok: [localhost] => {
    "msg": [
        "⚠️ Upload LOG falhou (HTTP=400) mas pipeline continua.",
        "HTTP_CODE=400\nBODY:\n{\"status\":\"FAILURE\",\"code\":\"INVALID_REQUEST\",\"message\":\"identifier: can be 128 characters long and can only contain alphanumeric, underscore and $ characters, and not start with a number or $\",\"correlationId\":\"6ad80f3d-3aec-4a1c-97c7-ca38583781cc\",\"errors\":[{\"fieldId\":\"identifier\",\"error\":\"can be 128 characters long and can only contain alphanumeric, underscore and $ characters, and not start with a number or $\"}]}"
    ]
}
TASK [Harness | Enviar STATUS] *************************************************
changed: [localhost]
TASK [Harness | Extrair HTTP_CODE STATUS] **************************************
ok: [localhost]
TASK [Harness | Mostrar resultado upload STATUS] *******************************
ok: [localhost]
TASK [Harness | Avisar se STATUS não for 2xx] **********************************
ok: [localhost] => {
    "msg": [
        "⚠️ Upload STATUS falhou (HTTP=400) mas pipeline continua.",
        "HTTP_CODE=400\nBODY:\n{\"status\":\"FAILURE\",\"code\":\"INVALID_REQUEST\",\"message\":\"identifier: can be 128 characters long and can only contain alphanumeric, underscore and $ characters, and not start with a number or $\",\"correlationId\":\"861e8ea8-c74d-48c6-b911-cb3233c36a15\",\"errors\":[{\"fieldId\":\"identifier\",\"error\":\"can be 128 characters long and can only contain alphanumeric, underscore and $ characters, and not start with a number or $\"}]}"
    ]
}
TASK [Harness | Se status não existir, avisar e seguir] ************************
skipping: [localhost]
TASK [Harness | Fim (não falha)] ***********************************************
ok: [localhost] => {
    "msg": [
        "Upload step finalizado (pipeline não será interrompida)."
    ]
}
TASK [Predeploy | Falhar se init_parallel.sh retornou erro (depois do upload)] ***
skipping: [localhost]
PLAY RECAP *********************************************************************
localhost                  : ok=69   changed=16   unreachable=0    failed=0    skipped=8    rescued=0    ignored=0   
Command finished with status SUCCESS
