Exec using JSCH
Connecting to 10.218.238.144 ....
Connection to 10.218.238.144 established
Executing command ...
Clonando repo em /tmp/tmp.qSgLEsyGev/repo...
Cloning into '/tmp/tmp.qSgLEsyGev/repo'...
remote: Enumerating objects: 48, done.
remote: Counting objects:   2% (1/48)
remote: Counting objects:   4% (2/48)
remote: Counting objects:   6% (3/48)
remote: Counting objects:   8% (4/48)
remote: Counting objects:  10% (5/48)
remote: Counting objects:  12% (6/48)
remote: Counting objects:  14% (7/48)
remote: Counting objects:  16% (8/48)
remote: Counting objects:  18% (9/48)
remote: Counting objects:  20% (10/48)
remote: Counting objects:  22% (11/48)
remote: Counting objects:  25% (12/48)
remote: Counting objects:  27% (13/48)
remote: Counting objects:  29% (14/48)
remote: Counting objects:  31% (15/48)
remote: Counting objects:  33% (16/48)
remote: Counting objects:  35% (17/48)
remote: Counting objects:  37% (18/48)
remote: Counting objects:  39% (19/48)
remote: Counting objects:  41% (20/48)
remote: Counting objects:  43% (21/48)
remote: Counting objects:  45% (22/48)
remote: Counting objects:  47% (23/48)
remote: Counting objects:  50% (24/48)
remote: Counting objects:  52% (25/48)
remote: Counting objects:  54% (26/48)
remote: Counting objects:  56% (27/48)
remote: Counting objects:  58% (28/48)
remote: Counting objects:  60% (29/48)
remote: Counting objects:  62% (30/48)
remote: Counting objects:  64% (31/48)
remote: Counting objects:  66% (32/48)
remote: Counting objects:  68% (33/48)
remote: Counting objects:  70% (34/48)
remote: Counting objects:  72% (35/48)
remote: Counting objects:  75% (36/48)
remote: Counting objects:  77% (37/48)
remote: Counting objects:  79% (38/48)
remote: Counting objects:  81% (39/48)
remote: Counting objects:  83% (40/48)
remote: Counting objects:  85% (41/48)
remote: Counting objects:  87% (42/48)
remote: Counting objects:  89% (43/48)
remote: Counting objects:  91% (44/48)
remote: Counting objects:  93% (45/48)
remote: Counting objects:  95% (46/48)
remote: Counting objects:  97% (47/48)
remote: Counting objects: 100% (48/48)
remote: Counting objects: 100% (48/48), done.
remote: Compressing objects:   2% (1/41)
remote: Compressing objects:   4% (2/41)
remote: Compressing objects:   7% (3/41)
remote: Compressing objects:   9% (4/41)
remote: Compressing objects:  12% (5/41)
remote: Compressing objects:  14% (6/41)
remote: Compressing objects:  17% (7/41)
remote: Compressing objects:  19% (8/41)
remote: Compressing objects:  21% (9/41)
remote: Compressing objects:  24% (10/41)
remote: Compressing objects:  26% (11/41)
remote: Compressing objects:  29% (12/41)
remote: Compressing objects:  31% (13/41)
remote: Compressing objects:  34% (14/41)
remote: Compressing objects:  36% (15/41)
remote: Compressing objects:  39% (16/41)
remote: Compressing objects:  41% (17/41)
remote: Compressing objects:  43% (18/41)
remote: Compressing objects:  46% (19/41)
remote: Compressing objects:  48% (20/41)
remote: Compressing objects:  51% (21/41)
remote: Compressing objects:  53% (22/41)
remote: Compressing objects:  56% (23/41)
remote: Compressing objects:  58% (24/41)
remote: Compressing objects:  60% (25/41)
remote: Compressing objects:  63% (26/41)
remote: Compressing objects:  65% (27/41)
remote: Compressing objects:  68% (28/41)
remote: Compressing objects:  70% (29/41)
remote: Compressing objects:  73% (30/41)
remote: Compressing objects:  75% (31/41)
remote: Compressing objects:  78% (32/41)
remote: Compressing objects:  80% (33/41)
remote: Compressing objects:  82% (34/41)
remote: Compressing objects:  85% (35/41)
remote: Compressing objects:  87% (36/41)
remote: Compressing objects:  90% (37/41)
remote: Compressing objects:  92% (38/41)
remote: Compressing objects:  95% (39/41)
remote: Compressing objects:  97% (40/41)
remote: Compressing objects: 100% (41/41)
remote: Compressing objects: 100% (41/41), done.
remote: Total 48 (delta 19), reused 0 (delta 0), pack-reused 0
Receiving objects:   2% (1/48)
Receiving objects:   4% (2/48)
Receiving objects:   6% (3/48)
Receiving objects:   8% (4/48)
Receiving objects:  10% (5/48)
Receiving objects:  12% (6/48)
Receiving objects:  14% (7/48)
Receiving objects:  16% (8/48)
Receiving objects:  18% (9/48)
Receiving objects:  20% (10/48)
Receiving objects:  22% (11/48)
Receiving objects:  25% (12/48)
Receiving objects:  27% (13/48)
Receiving objects:  29% (14/48)
Receiving objects:  31% (15/48)
Receiving objects:  33% (16/48)
Receiving objects:  35% (17/48)
Receiving objects:  37% (18/48)
Receiving objects:  39% (19/48)
Receiving objects:  41% (20/48)
Receiving objects:  43% (21/48)
Receiving objects:  45% (22/48)
Receiving objects:  47% (23/48)
Receiving objects:  50% (24/48)
Receiving objects:  52% (25/48)
Receiving objects:  54% (26/48)
Receiving objects:  56% (27/48)
Receiving objects:  58% (28/48)
Receiving objects:  60% (29/48)
Receiving objects:  62% (30/48)
Receiving objects:  64% (31/48)
Receiving objects:  66% (32/48)
Receiving objects:  68% (33/48)
Receiving objects:  70% (34/48)
Receiving objects:  72% (35/48)
Receiving objects:  75% (36/48)
Receiving objects:  77% (37/48)
Receiving objects:  79% (38/48)
Receiving objects:  81% (39/48)
Receiving objects:  83% (40/48)
Receiving objects:  85% (41/48)
Receiving objects:  87% (42/48)
Receiving objects:  89% (43/48)
Receiving objects:  91% (44/48)
Receiving objects:  93% (45/48)
Receiving objects:  95% (46/48)
Receiving objects:  97% (47/48)
Receiving objects: 100% (48/48)
Receiving objects: 100% (48/48), 8.56 KiB | 4.28 MiB/s, done.
Resolving deltas:   0% (0/19)
Resolving deltas:   5% (1/19)
Resolving deltas:  10% (2/19)
Resolving deltas:  15% (3/19)
Resolving deltas:  21% (4/19)
Resolving deltas:  26% (5/19)
Resolving deltas:  31% (6/19)
Resolving deltas:  36% (7/19)
Resolving deltas:  42% (8/19)
Resolving deltas:  47% (9/19)
Resolving deltas:  52% (10/19)
Resolving deltas:  57% (11/19)
Resolving deltas:  63% (12/19)
Resolving deltas:  68% (13/19)
Resolving deltas:  73% (14/19)
Resolving deltas:  78% (15/19)
Resolving deltas:  84% (16/19)
Resolving deltas:  89% (17/19)
Resolving deltas:  94% (18/19)
Resolving deltas: 100% (19/19)
Resolving deltas: 100% (19/19), done.
ConteÃºdo do repo:
total 8
drwxr-x---. 7 ec2-user ec2-user   98 Jan  8 18:12 .
drwx------. 3 ec2-user ec2-user   18 Jan  8 18:12 ..
drwxr-x---. 3 ec2-user ec2-user   42 Jan  8 18:12 ansible
drwxr-x---. 2 ec2-user ec2-user   27 Jan  8 18:12 execution
drwxr-x---. 8 ec2-user ec2-user  163 Jan  8 18:12 .git
drwxr-x---. 2 ec2-user ec2-user   26 Jan  8 18:12 machines
-rw-r-----. 1 ec2-user ec2-user 6376 Jan  8 18:12 README.md
drwxr-x---. 2 ec2-user ec2-user   21 Jan  8 18:12 scripts
PWD do repo:
/tmp/tmp.qSgLEsyGev/repo
PLAY [Build dynamic target list from execution + machines folder] **************
TASK [Resolve paths] ***********************************************************
ok: [localhost]
TASK [Load execution file] *****************************************************
ok: [localhost]
TASK [Validate execution targets] **********************************************
ok: [localhost] => {
    "changed": false,
    "msg": "All assertions passed"
}
TASK [Check machine files exist] ***********************************************
ok: [localhost] => (item=sitef-02)
TASK [Fail if any machine file is missing] *************************************
ok: [localhost] => (item={'changed': False, 'stat': {'exists': True, 'path': '../../machines/sitef-02.yml', 'mode': '0640', 'isdir': False, 'ischr': False, 'isblk': False, 'isreg': True, 'isfifo': False, 'islnk': False, 'issock': False, 'uid': 1000, 'gid': 1000, 'size': 253, 'inode': 6291676, 'dev': 64775, 'nlink': 1, 'atime': 1767895967.786748, 'mtime': 1767895967.7827477, 'ctime': 1767895967.7827477, 'wusr': True, 'rusr': True, 'xusr': False, 'wgrp': False, 'rgrp': True, 'xgrp': False, 'woth': False, 'roth': False, 'xoth': False, 'isuid': False, 'isgid': False, 'blocks': 8, 'block_size': 4096, 'device_type': 0, 'readable': True, 'writeable': True, 'executable': False, 'pw_name': 'ec2-user', 'gr_name': 'ec2-user', 'checksum': 'b607fdf55dac2409db597a628248835d3329d5b4', 'mimetype': 'text/plain', 'charset': 'us-ascii', 'version': '1198221077', 'attributes': [], 'attr_flags': ''}, 'invocation': {'module_args': {'path': '../../machines/sitef-02.yml', 'follow': False, 'get_md5': False, 'get_checksum': True, 'get_mime': True, 'get_attributes': True, 'checksum_algorithm': 'sha1'}}, 'ansible_facts': {'discovered_interpreter_python': '/usr/bin/python3'}, 'failed': False, 'item': 'sitef-02', 'ansible_loop_var': 'item'}) => {
    "ansible_loop_var": "item",
    "changed": false,
    "item": {
        "ansible_facts": {
            "discovered_interpreter_python": "/usr/bin/python3"
        },
        "ansible_loop_var": "item",
        "changed": false,
        "failed": false,
        "invocation": {
            "module_args": {
                "checksum_algorithm": "sha1",
                "follow": false,
                "get_attributes": true,
                "get_checksum": true,
                "get_md5": false,
                "get_mime": true,
                "path": "../../machines/sitef-02.yml"
            }
        },
        "item": "sitef-02",
        "stat": {
            "atime": 1767895967.786748,
            "attr_flags": "",
            "attributes": [],
            "block_size": 4096,
            "blocks": 8,
            "charset": "us-ascii",
            "checksum": "b607fdf55dac2409db597a628248835d3329d5b4",
            "ctime": 1767895967.7827477,
            "dev": 64775,
            "device_type": 0,
            "executable": false,
            "exists": true,
            "gid": 1000,
            "gr_name": "ec2-user",
            "inode": 6291676,
            "isblk": false,
            "ischr": false,
            "isdir": false,
            "isfifo": false,
            "isgid": false,
            "islnk": false,
            "isreg": true,
            "issock": false,
            "isuid": false,
            "mimetype": "text/plain",
            "mode": "0640",
            "mtime": 1767895967.7827477,
            "nlink": 1,
            "path": "../../machines/sitef-02.yml",
            "pw_name": "ec2-user",
            "readable": true,
            "rgrp": true,
            "roth": false,
            "rusr": true,
            "size": 253,
            "uid": 1000,
            "version": "1198221077",
            "wgrp": false,
            "woth": false,
            "writeable": true,
            "wusr": true,
            "xgrp": false,
            "xoth": false,
            "xusr": false
        }
    },
    "msg": "All assertions passed"
}
TASK [Load machine definitions] ************************************************
ok: [localhost] => (item=sitef-02)
TASK [Add targets dynamically (per machine vars)] ******************************
changed: [localhost] => (item=sitef-02)
TASK [Show selected targets] ***************************************************
ok: [localhost] => {
    "msg": [
        "Execution file: ../../execution/execution.yml",
        "Machines dir: ../../machines",
        "Selected targets: ['sitef-02']"
    ]
}
PLAY [Deliver to selected machines (download from S3 + run script)] ************
TASK [Gathering Facts] *********************************************************
ok: [sitef-02]
TASK [Ensure directories exist] ************************************************
ok: [sitef-02] => (item=/opt/SoftwareExpress/sitef)
ok: [sitef-02] => (item=/opt/SoftwareExpress/sitef)
TASK [Copy scripts to target] **************************************************
ok: [sitef-02]
TASK [Check AWS CLI exists on target] ******************************************
fatal: [sitef-02]: FAILED! => {"changed": false, "cmd": "aws --version", "msg": "[Errno 2] No such file or directory: b'aws'", "rc": 2, "stderr": "", "stderr_lines": [], "stdout": "", "stdout_lines": []}
PLAY RECAP *********************************************************************
localhost                  : ok=8    changed=1    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
sitef-02                   : ok=3    changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
Command finished with status FAILURE
