Error evaluating expression [secrets\.getValue'; then echo "ERRO: detectei '<+secrets.getValue(...)>' literal dentro do PAIRS." echo "Isso indica que o Harness não resolveu os secrets dentro do input. Coloque os <+secrets.getValue()> direto em environmentVariables do step (não dentro de variável input)." exit 1 fi SECRET_JSON="$( PAIRS_RAW="$ {PAIRS_RAW}" DELIM="$ {DELIM}" python3 - <<'PY' import os, re, sys, json, hashlib raw = os.environ.get("PAIRS_RAW","") delim = os.environ.get("DELIM","***") # Split por delimitador (***) parts = [p.strip() for p in raw.split(delim)] obj = {} seen = set() # Regex aceita letras/números/underscore/ponto/hífen key_re = re.compile(r"^[A-Za-z_][A-Za-z0-9_.-]*$") for part in parts: if not part: continue if "=" not in part: print(f"ERRO: item sem '=': {part}", file=sys.stderr) sys.exit(1) k, v = part.split("=", 1) k = k.strip() v = v.strip() if not k or not key_re.match(k): print(f"ERRO: key inválida: '{k}' (per..truncated
